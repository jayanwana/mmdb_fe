(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"6gz5":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n("o0o1"),r=n.n(a),o=n("HaE+"),i=n("1OyB"),s=n("vuIU"),c=n("BOF4"),u=n.n(c),l=n("p46w"),d=n.n(l),p=function(){function e(t){Object(i.a)(this,e),this.decodedToken={email:"",exp:0};try{t&&(this.decodedToken=u()(t))}catch(n){}}return Object(s.a)(e,[{key:"authorizationString",value:function(){return"Bearer ".concat(this.token)}},{key:"expiresAt",value:function(){return new Date(1e3*this.decodedToken.exp)}},{key:"isExpired",value:function(){return new Date>this.expiresAt}},{key:"isValid",value:function(){return!this.isExpired()}}],[{key:"decodeToken",value:function(e){return u()(e)}},{key:"getToken",value:function(){if(!document.cookie)return null;var e=document.cookie.split(";").map((function(e){return e.trim()})).filter((function(e){return e.startsWith("myApp.authToken=")}));return 0===e.length?null:decodeURIComponent(e[0].split("=")[1])}},{key:"storeToken",value:function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.a.set("myApp.authToken",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteToken",value:function(){d.a.remove("myApp.authToken")}}]),e}()},BOF4:function(e,t,n){"use strict";var a=n("evrj");function r(e){this.message=e}r.prototype=new Error,r.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!==typeof e)throw new r("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(a(e.split(".")[n]))}catch(o){throw new r("Invalid token specified: "+o.message)}},e.exports.InvalidTokenError=r},Ho3L:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return n("IT5z")}])},IT5z:function(e,t,n){"use strict";n.r(t);var a,r=n("1OyB"),o=n("vuIU"),i=n("JX7q"),s=n("Ji7U"),c=n("md7G"),u=n("foSv"),l=n("rePB"),d=n("q1tI"),p=n.n(d),m=n("nOHt"),f=n.n(m),h=n("8Kt/"),v=n.n(h),g=n("6gz5"),b=n("L+Rf"),k=n("o0o1"),y=n.n(k),w=n("HaE+"),C=n("QojX"),O=n("3Z9Z"),j=n("JI6e"),x=n("wx14"),I=n("zLVn"),E=n("TSYQ"),R=n.n(E),T=n("JCAc"),N=n("ZCiN"),F=n("YdCC"),S=n("vUet"),P=n("CR+v"),A=n("xgq2"),L=n("z+q/"),M=((a={})[A.b]="show",a[A.a]="show",a),U=p.a.forwardRef((function(e,t){var n=e.className,a=e.children,r=Object(I.a)(e,["className","children"]),o=Object(d.useCallback)((function(e){Object(L.a)(e),r.onEnter&&r.onEnter(e)}),[r]);return p.a.createElement(A.e,Object(x.a)({ref:t,addEndListener:P.a},r,{onEnter:o}),(function(e,t){return p.a.cloneElement(a,Object(x.a)({},t,{className:R()("fade",n,a.props.className,M[e])}))}))}));U.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},U.displayName="Fade";var _=U,D=n("17x9"),B=n.n(D),z={label:B.a.string.isRequired,onClick:B.a.func},H=p.a.forwardRef((function(e,t){var n=e.label,a=e.onClick,r=e.className,o=Object(I.a)(e,["label","onClick","className"]);return(p.a.createElement("button",Object(x.a)({ref:t,type:"button",className:R()("close",r),onClick:a},o),p.a.createElement("span",{"aria-hidden":"true"},"\xd7"),p.a.createElement("span",{className:"sr-only"},n)))}));H.displayName="CloseButton",H.propTypes=z,H.defaultProps={label:"Close"};var G,J=H,q=n("dbZe"),Z={show:!0,transition:_,closeLabel:"Close alert"},K={show:"onClose"},W=p.a.forwardRef((function(e,t){var n=Object(T.a)(e,K),a=n.bsPrefix,r=n.show,o=n.closeLabel,i=n.className,s=n.children,c=n.variant,u=n.onClose,l=n.dismissible,d=n.transition,m=Object(I.a)(n,["bsPrefix","show","closeLabel","className","children","variant","onClose","dismissible","transition"]),f=Object(S.a)(a,"alert"),h=Object(N.a)((function(e){u(!1,e)})),v=p.a.createElement("div",Object(x.a)({role:"alert"},d?m:void 0,{ref:t,className:R()(i,f,c&&f+"-"+c,l&&f+"-dismissible")}),l&&p.a.createElement(J,{onClick:h,label:o}),s);return d?p.a.createElement(d,Object(x.a)({unmountOnExit:!0},m,{in:r}),v):r?v:null})),X=(G="h4",p.a.forwardRef((function(e,t){return p.a.createElement("div",Object(x.a)({},e,{ref:t,className:R()(e.className,G)}))})));X.displayName="DivStyledAsH4",W.displayName="Alert",W.defaultProps=Z,W.Link=Object(F.a)("alert-link",{Component:q.a}),W.Heading=Object(F.a)("alert-heading",{Component:X});var V=W,Q=n("cWnB"),Y=n("s3JR"),$=n.n(Y),ee=p.a.createElement;function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}$.a.setApiKey("AIzaSyC36kr5pALWRMYe2_PWaPtzfZc4CKNqPhU"),$.a.setRegion("ng");var ne=function(e){Object(s.a)(n,e);var t=te(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={name:a.props.market?a.props.market.name:"",description:a.props.market?a.props.market.description:"",foodCategory:a.props.market?a.props.market.foodCategory:"",location:a.props.market?a.props.market.location:null,address:a.props.market?a.props.market.address:"",img_1:null,img_2:null,img_3:null},a.handleInputChange=a.handleInputChange.bind(Object(i.a)(a)),a.handleFileInput=a.handleFileInput.bind(Object(i.a)(a)),a.submitForm=a.submitForm.bind(Object(i.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){}},{key:"handleInputChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(l.a)({},a,n))}},{key:"handleFileInput",value:function(e){var t=e.target.name;this.setState(Object(l.a)({},t,e.target.files[0]))}},{key:"submitForm",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n,a,r,o,i=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,$.a.fromAddress(this.state.address).then((function(e){var t=e.results[0].geometry.location,n=t.lat,a=t.lng;i.setState({location:JSON.stringify({coordinates:[n,a]})})}),(function(e){console.error(e)}));case 3:for(a in n=new FormData,this.state)this.state[a]&&(this.state[a].name?n.append(a,this.state[a],this.state[a].name):n.append(a,this.state[a]));r=g.a.getToken(),o={headers:{"Content-type":"multipart/form-data",Authorization:"Bearer ".concat(r)}},this.props.update?b.a.updateMarket(this.props.market.id,n,o).then((function(e){alert("Market Successfully Updated"),f.a.push("".concat("/mmdb-fe","/admin"))})).catch((function(e){401===e.response.status&&(g.a.deleteToken(),alert("Please Login Again"),f.a.push("".concat("/mmdb-fe","/login"))),console.log(e)})):b.a.createMarket(n,o).then((function(e){alert("Market Successfully Added"),f.a.push("".concat("/mmdb-fe","/admin"))})).catch((function(e){401===e.response.status&&(g.a.deleteToken(),alert("Please Login Again"),f.a.push("".concat("/mmdb-fe","/login"))),console.log(e)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return ee("div",{className:"form-wrap"},ee("button",{className:"close-form",onClick:function(){return e.props.close(!0)}},"Close"),ee(C.a,{onSubmit:this.submitForm,className:"marketForm"},ee(C.a.Group,{as:O.a,controlId:"formHorizontalName"},ee(C.a.Label,{column:!0,sm:3},"Market Name"),ee(j.a,{sm:8},ee(C.a.Control,{required:!0,name:"name",type:"text",placeholder:"Enter Market Name",value:this.state.name,onChange:this.handleInputChange}))),ee(C.a.Group,{as:O.a,controlId:"formHorizontalDescription"},ee(C.a.Label,{column:!0,sm:3},"Description"),ee(j.a,{sm:8},ee(C.a.Control,{required:!0,name:"description",type:"text",placeholder:"Brief Market Description",value:this.state.description,onChange:this.handleInputChange}))),ee(C.a.Group,{as:O.a,controlId:"formHorizontalFoodCategory"},ee(C.a.Label,{column:!0,sm:3},"Food Category"),ee(j.a,{sm:8},ee(C.a.Control,{required:!0,name:"foodCategory",type:"text",placeholder:"Food Category",value:this.state.foodCategory,onChange:this.handleInputChange}))),ee(C.a.Group,{as:O.a,controlId:"formHorizontalAdress"},ee(C.a.Label,{column:!0,sm:3},"Address"),ee(j.a,{sm:8},ee(C.a.Control,{required:!0,name:"address",type:"text",placeholder:"Address",value:this.state.address,onChange:this.handleInputChange}))),ee(C.a.Group,{as:O.a,controlId:"formHorizontalimg_1"},ee(C.a.Label,{column:!0,sm:3},"Market Image 1"),ee(j.a,{sm:4},ee(C.a.Control,{name:"img_1",type:"file",onChange:this.handleFileInput})),ee(j.a,{sm:4},this.state.img_1?ee("img",{style:{width:"60px",height:"60px"},src:URL.createObjectURL(this.state.img_1)}):"")),ee(C.a.Group,{as:O.a,controlId:"formHorizontalimg_2"},ee(C.a.Label,{column:!0,sm:3},"Market Image 2"),ee(j.a,{sm:4},ee(C.a.Control,{name:"img_2",type:"file",onChange:this.handleFileInput})),ee(j.a,{sm:4},this.state.img_2?ee("img",{style:{width:"60px",height:"60px"},src:URL.createObjectURL(this.state.img_2)}):"")),ee(C.a.Group,{as:O.a,controlId:"formHorizontalimg_3"},ee(C.a.Label,{column:!0,sm:3},"Market Image 3"),ee(j.a,{sm:4},ee(C.a.Control,{name:"img_3",type:"file",onChange:this.handleFileInput})),ee(j.a,{sm:4},this.state.img_3?ee("img",{style:{width:"60px",height:"60px"},src:URL.createObjectURL(this.state.img_3)}):"")),this.state.invalid?ee(V,{variant:"warning"},this.state.error):"",ee(C.a.Group,{as:O.a},ee(j.a,{sm:{span:10,offset:3}},ee(Q.a,{type:"submit",variant:"dark"},"Submit")))))}}]),n}(d.Component),ae=n("MbLX"),re=n("Bf30"),oe=n.n(re),ie=n("hmBY"),se=p.a.createElement;function ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.a)(this,n)}}var ue=function(e){Object(s.a)(n,e);var t=ce(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={loaded:!1,adminUser:!1,showForm:!1,market:null,update:!1},a.showForm=a.showForm.bind(Object(i.a)(a)),a.deleteMarket=a.deleteMarket.bind(Object(i.a)(a)),a.updateMarket=a.updateMarket.bind(Object(i.a)(a)),a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.timeoutId=setTimeout((function(){e.props.pageTransitionReadyToEnter(),e.setState({loaded:!0})}),2e3);var t=g.a.getToken();g.a.decodeToken(t);t&&(new g.a(t).isValid()&&this.setState({adminUser:!0}))}},{key:"componentWillUnmount",value:function(){this.timeoutId&&clearTimeout(this.timeoutId)}},{key:"showForm",value:function(e){e?this.setState({showForm:!this.state.showForm,market:null,update:!1}):this.setState({showForm:!this.state.showForm})}},{key:"updateMarket",value:function(e){this.setState({market:e,update:!0,showForm:!0})}},{key:"deleteMarket",value:function(e){var t=g.a.getToken(),n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(t)}};b.a.deleteMarket(e,n).then((function(e){alert("Market Successfully Deleted"),f.a.push("".concat("/mmdb-fe","/admin"))})).catch((function(e){401===e.response.status&&(g.a.deleteToken(),alert("Please Login Again"),f.a.push("".concat("/mmdb-fe","/login"))),console.log(e)}))}},{key:"render",value:function(){return this.state.adminUser?se("div",null,se(v.a,null,se("title",null,"Admin"),se("link",{rel:"icon",href:oe.a}),se("meta",{charset:"utf-8"}),se("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"}),se("link",{rel:"stylesheet",href:"https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css",integrity:"sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh",crossOrigin:"anonymous"}),se("link",{href:"https://fonts.googleapis.com/css?family=Big+Shoulders+Display|Montserrat|Orbitron|Roboto&display=swap",rel:"stylesheet"})),se("div",{className:"container"},se(ae.a,null),this.state.showForm&&se(ne,{key:Math.floor(100*Math.random()),close:this.showForm,market:this.state.market,update:this.state.update}),se("h1",null,"Admin"),se(ie.a,{admin:!0,handler:this.showForm,update:this.updateMarket,delete:this.deleteMarket}))):null}}]),n}(d.Component);Object(l.a)(ue,"pageTransitionDelayEnter",!0),ue.defaultProps={pageTransitionReadyToEnter:function(){}};t.default=ue},evrj:function(e,t,n){var a=n("m4GZ");e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(a(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(n){return a(t)}}},m4GZ:function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function a(e){this.message=e}a.prototype=new Error,a.prototype.name="InvalidCharacterError",e.exports="undefined"!==typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,o,i=0,s=0,c="";o=t.charAt(s++);~o&&(r=i%4?64*r+o:o,i++%4)?c+=String.fromCharCode(255&r>>(-2*i&6)):0)o=n.indexOf(o);return c}},p46w:function(e,t,n){var a,r;!function(o){if(void 0===(r="function"===typeof(a=o)?a.call(t,n,t,e):a)||(e.exports=r),!0,e.exports=o(),!!0){var i=window.Cookies,s=window.Cookies=o();s.noConflict=function(){return window.Cookies=i,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var a in n)t[a]=n[a]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(a){function r(){}function o(t,n,o){if("undefined"!==typeof document){"number"===typeof(o=e({path:"/"},r.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var i=JSON.stringify(n);/^[\{\[]/.test(i)&&(n=i)}catch(u){}n=a.write?a.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in o)o[c]&&(s+="; "+c,!0!==o[c]&&(s+="="+o[c].split(";")[0]));return document.cookie=t+"="+n+s}}function i(e,n){if("undefined"!==typeof document){for(var r={},o=document.cookie?document.cookie.split("; "):[],i=0;i<o.length;i++){var s=o[i].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(a.read||a)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(l){}if(r[u]=c,e===u)break}catch(l){}}return e?r[e]:r}}return r.set=o,r.get=function(e){return i(e,!1)},r.getJSON=function(e){return i(e,!0)},r.remove=function(t,n){o(t,"",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}((function(){}))}))},rePB:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return a}))},s3JR:function(e,t,n){"use strict";var a=n("ls82");function r(e,t,n,a,r,o,i){try{var s=e[o](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,r)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function s(e){r(i,a,o,s,c,"next",e)}function c(e){r(i,a,o,s,c,"throw",e)}s(void 0)}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=!1,s=null,c="en",u=null,l="https://maps.google.com/maps/api/geocode/json";function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i&&(t?console.warn(e):console.log(e))}function p(e){return m.apply(this,arguments)}function m(){return(m=o(a.mark((function e(t){var n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t).catch((function(){return Promise.reject(new Error("Error fetching data"))}));case 2:return n=e.sent,e.next=5,n.json().catch((function(){return d("Error parsing server response"),Promise.reject(new Error("Error parsing server response"))}));case 5:if("OK"!==(r=e.sent).status){e.next=9;break}return d(r),e.abrupt("return",r);case 9:return d("".concat(r.error_message,".\nServer returned status code ").concat(r.status),!0),e.abrupt("return",Promise.reject(new Error("".concat(r.error_message,".\nServer returned status code ").concat(r.status))));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f={setApiKey:function(e){s=e},setLanguage:function(e){c=e},setRegion:function(e){u=e},enableDebug:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i=e},fromLatLng:function(e,t,n,r,i){return o(a.mark((function o(){var m,f;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e&&t){a.next=3;break}return d("Provided coordinates are invalid",!0),a.abrupt("return",Promise.reject(new Error("Provided coordinates are invalid")));case 3:return m="".concat(e,",").concat(t),f="".concat(l,"?latlng=").concat(encodeURIComponent(m)),(n||s)&&(f+="&key=".concat(s=n||s)),(r||c)&&(f+="&language=".concat(c=r||c)),(i||u)&&(u=i||u,f+="&region=".concat(encodeURIComponent(u))),a.abrupt("return",p(f));case 9:case"end":return a.stop()}}),o)})))()},fromAddress:function(e,t,n,r){return o(a.mark((function o(){var i;return a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=3;break}return d("Provided address is invalid",!0),a.abrupt("return",Promise.reject(new Error("Provided address is invalid")));case 3:return i="".concat(l,"?address=").concat(encodeURIComponent(e)),(t||s)&&(i+="&key=".concat(s=t||s)),(n||c)&&(i+="&language=".concat(c=n||c)),(r||u)&&(u=r||u,i+="&region=".concat(encodeURIComponent(u))),a.abrupt("return",p(i));case 8:case"end":return a.stop()}}),o)})))()}};t.default=f}},[["Ho3L",0,2,1,3,4]]]);